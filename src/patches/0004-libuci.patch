From bf2674d29aca1433b7b859f5f7a2b20a6e0bc8d4 Mon Sep 17 00:00:00 2001
From: Lance Fredrickson <lancethepants@gmail.com>
Date: Fri, 18 Oct 2024 08:51:22 -0600
Subject: [PATCH] libuci

---
 package/libuci/libuci.hash | 2 +-
 package/libuci/libuci.mk   | 9 ++++++++-
 2 files changed, 9 insertions(+), 2 deletions(-)

diff --git a/package/libuci/libuci.hash b/package/libuci/libuci.hash
index cc04320331..253b0b7011 100644
--- a/package/libuci/libuci.hash
+++ b/package/libuci/libuci.hash
@@ -1,4 +1,4 @@
 # Locally computed
-sha256  d095dc7ff4714e33aa18ef3ea5d30f525a202d6997d7b13bd952da53818988d6  libuci-4b3db1179747b6a6779029407984bacef851325c-git4.tar.gz
+sha256  a4277ef8548e6bc07edef8191fb6f6e96bfef775b1202b7c71d17b9757ab0346  libuci-5781664d5087ccc4b5ab58505883231212dbedbc-git4.tar.gz
 sha256  39e1cc18a36172fb80d9b37f0af77d78ae935bd8a020978a7895d9e76a24e112  cli.c
 sha256  69d4eea4de19d27014f3d6ed723081b4039700bfd73cd0a5e39e2c4f19a58c66  libuci.c
diff --git a/package/libuci/libuci.mk b/package/libuci/libuci.mk
index 81e87aa5be..61bc4fdd58 100644
--- a/package/libuci/libuci.mk
+++ b/package/libuci/libuci.mk
@@ -4,7 +4,7 @@
 #
 ################################################################################
 
-LIBUCI_VERSION = 4b3db1179747b6a6779029407984bacef851325c
+LIBUCI_VERSION = 5781664d5087ccc4b5ab58505883231212dbedbc
 LIBUCI_SITE = https://git.openwrt.org/project/uci.git
 LIBUCI_SITE_METHOD = git
 LIBUCI_LICENSE = LGPL-2.1, GPL-2.0 (tools)
@@ -26,4 +26,11 @@ else
 LIBUCI_CONF_OPTS += -DBUILD_LUA=OFF
 endif
 
+define LIBUCI_POST_INSTALL_SCRIPTS
+	$(INSTALL) -d $(TARGET_DIR)/lib/config
+	$(INSTALL) -D -m 0644 $(@D)/sh/uci.sh $(TARGET_DIR)/lib/config/
+endef
+
+LIBUCI_POST_INSTALL_TARGET_HOOKS += LIBUCI_POST_INSTALL_SCRIPTS
+
 $(eval $(cmake-package))
-- 
2.39.5

